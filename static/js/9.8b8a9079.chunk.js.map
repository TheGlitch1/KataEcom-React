{"version":3,"sources":["pages/SingleProductPage.js"],"names":["Wrapper","styled","section","_templateObject","_taggedTemplateLiteral","Screen","lg","_templateObject2","SingleProductPage","navigate","useNavigate","id","useParams","prevId","useRef","single_product","product","single_product_loading","loading","single_product_error","error","fetchSingleProduct","useProductsContext","title","price","image","category","description","rating","useEffect","current","timeout","setTimeout","clearTimeout","_jsx","className","children","Loading","Error","_jsxs","Breadcrumb","products","src","alt","Button","variant","Link","to","Typography","H2","Stars","stars","P","AddToCart"],"mappings":"sMAkBA,MA4EMA,EAAUC,IAAOC,QAAOC,MAAAC,YAAA,8hCAiBxBC,IAAOC,GAAEC,MAAAH,YAAA,sDA0CAI,UAvIWA,KACxB,MAAMC,EAAWC,eACX,GAAEC,GAAOC,cACTC,EAASC,iBAAO,OAGpBC,eAAgBC,EAChBC,uBAAwBC,EACxBC,qBAAsBC,EAAK,mBAC3BC,GACEC,eAEE,MAAEC,EAAK,MAAEC,EAAK,MAAEC,EAAK,SAAEC,EAAQ,YAAEC,EAAW,OAAEC,GAAWZ,EAmB/D,OAjBAa,qBAAU,KACJhB,EAAOiB,UAAYnB,IACrBU,EAAmBV,GACnBE,EAAOiB,QAAUnB,KAElB,CAACA,EAAIU,IAERQ,qBAAU,KACR,GAAIT,EAAO,CACT,MAAMW,EAAUC,YAAW,KACzBvB,EAAS,OACR,KAEH,MAAO,IAAMwB,aAAaF,MAE3B,CAACX,EAAOX,IAEPS,EAEAgB,cAAA,OAAKC,UAAU,WAAUC,SACvBF,cAACG,IAAO,MAKVjB,EAEAc,cAAA,OAAKC,UAAU,WAAUC,SACvBF,cAACI,IAAK,MAMVC,eAAA,QAAAH,SAAA,CACEF,cAACM,IAAU,CAACjB,MAAOA,EAAOkB,UAAQ,IAClCP,cAAClC,EAAO,CAACmC,UAAU,OAAMC,SACvBG,eAAA,WAAAH,SAAA,CACEF,cAAA,OAAKC,UAAU,eAAcC,SAC3BF,cAAA,OAAKQ,IAAKjB,EAAOkB,IAAKpB,MAExBgB,eAAA,OAAKJ,UAAU,gBAAeC,SAAA,CAC5BF,cAACU,IAAM,CAACC,QAAQ,YAAWT,SACzBF,cAACY,IAAI,CAACC,GAAG,YAAWX,SAAC,uBAEvBF,cAACc,IAAWC,GAAE,CAAAb,SAAEb,IAChBW,cAACgB,IAAK,CAACC,MAAOvB,IACdW,eAACS,IAAWI,EAAC,CAACjB,UAAU,cAAaC,SAAA,CAAC,UAC7BG,eAAA,QAAAH,SAAA,CAAM,IAAEZ,QAEjBe,eAACS,IAAWI,EAAC,CAACjB,UAAU,iBAAgBC,SAAA,CAAC,aAC7BF,cAAA,QAAAE,SAAOV,OAEnBQ,cAACc,IAAWI,EAAC,CAAAhB,SAAET,IACfO,cAACmB,IAAS,CAACrC,QAASA","file":"static/js/9.8b8a9079.chunk.js","sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { useProductsContext } from \"../contexts/products_context\";\r\n\r\nimport {\r\n  Breadcrumb,\r\n  Error,\r\n  Loading,\r\n  Stars,\r\n  AddToCart,\r\n  Button,\r\n  Typography,\r\n} from \"../components\";\r\n\r\nimport Screen from \"../styles/Screen\";\r\n\r\nconst SingleProductPage = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const prevId = useRef(null);\r\n\r\n  const {\r\n    single_product: product,\r\n    single_product_loading: loading,\r\n    single_product_error: error,\r\n    fetchSingleProduct,\r\n  } = useProductsContext();\r\n\r\n  const { title, price, image, category, description, rating } = product;\r\n\r\n  useEffect(() => {\r\n    if (prevId.current !== id) {\r\n      fetchSingleProduct(id);\r\n      prevId.current = id; // Update the ref with the current id\r\n    }\r\n  }, [id, fetchSingleProduct]);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      const timeout = setTimeout(() => {\r\n        navigate(\"/\");\r\n      }, 3000);\r\n\r\n      return () => clearTimeout(timeout); // Clear timeout on unmount or error change\r\n    }\r\n  }, [error, navigate]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className='page-w-b'>\r\n        <Loading />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className='page-w-b'>\r\n        <Error />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main>\r\n      <Breadcrumb title={title} products />\r\n      <Wrapper className='page'>\r\n        <article>\r\n          <div className='product__img'>\r\n            <img src={image} alt={title} />\r\n          </div>\r\n          <div className='product__info'>\r\n            <Button variant='secondary'>\r\n              <Link to='/products'>Back to Products</Link>\r\n            </Button>\r\n            <Typography.H2>{title}</Typography.H2>\r\n            <Stars stars={rating} />\r\n            <Typography.P className='info__price'>\r\n              Price: <span>${price}</span>\r\n            </Typography.P>\r\n            <Typography.P className='info__category'>\r\n              Category: <span>{category}</span>\r\n            </Typography.P>\r\n            <Typography.P>{description}</Typography.P>\r\n            <AddToCart product={product} />\r\n          </div>\r\n        </article>\r\n      </Wrapper>\r\n    </main>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.section`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 2rem;\r\n\r\n  article {\r\n    background: var(--bg-color);\r\n    border-radius: var(--radius);\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n    padding: 2rem;\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n    gap: 2rem;\r\n    width: 100%;\r\n    max-width: 1200px;\r\n\r\n    ${Screen.lg`\r\n      grid-template-columns: 1fr 1fr;\r\n    `}\r\n\r\n    .product__img {\r\n      text-align: center;\r\n\r\n      img {\r\n        max-width: 100%;\r\n        border-radius: var(--radius);\r\n        object-fit: cover;\r\n      }\r\n    }\r\n\r\n    .product__info {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 1rem;\r\n\r\n      button {\r\n        width: max-content;\r\n      }\r\n\r\n      .info__price {\r\n        font-size: var(--fs-500);\r\n        color: var(--link-color);\r\n        span {\r\n          color: var(--accent-color-2);\r\n        }\r\n      }\r\n\r\n      .info__category {\r\n        font-size: var(--fs-400);\r\n        color: var(--text-color);\r\n        span {\r\n          color: var(--text-light-color);\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default SingleProductPage;\r\n"],"sourceRoot":""}